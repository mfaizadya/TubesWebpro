// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
  // output = "../src/generated"
}

datasource db {
  provider = "postgresql"
  url = env("DATABASE_URL")
}

model sections {
  id  Int @id @default(autoincrement())
  nama  String 

  levels levels[]
}

model levels {
  id Int @id @default(autoincrement())
  id_section Int
  nama  String 

  attempts attempts[]

  sections sections @relation(fields: [id_section], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "level_fk_1")

  @@index([id_section], map: "id_section")
}

model pelajars {
  id Int @id @default(autoincrement())
  nama String 
  username String 
  password String

  attempts attempts[]
}

model attempts {
  id Int @id @default(autoincrement())
  id_level Int
  id_pelajar Int
  skor Float

  levels levels @relation(fields: [id_level], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "attempt_fk_1")
  pelajars pelajars @relation(fields: [id_pelajar], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "attempt_fk_2")

  @@index([id_level], map: "id_level")
  @@index([id_pelajar], map: "id_pelajar")
}